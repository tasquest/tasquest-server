// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//+build !wireinject

package main

import (
	"github.com/gin-gonic/gin"
	"github.com/sirupsen/logrus"
	"gorm.io/gorm"

	"tasquest.com/server/adapters/input/rest"
	gorm2 "tasquest.com/server/adapters/output/databases/gorm"
	"tasquest.com/server/adapters/output/eventbus/message-bus"
	"tasquest.com/server/application"
	"tasquest.com/server/application/gamification/adventurers"
	"tasquest.com/server/application/gamification/leveling"
	"tasquest.com/server/application/gamification/tasks"
	"tasquest.com/server/application/security"
	"tasquest.com/server/commons"
	"tasquest.com/server/infra/database"
	"tasquest.com/server/infra/events"
	"tasquest.com/server/infra/web"
)

// Injectors from init_instances.go:

/**************************
 *    Common Providers    *
 **************************/
func loggerWire() *logrus.Logger {
	logger := commons.ProvideLogger()
	return logger
}

/**************************
 *    Infra Providers     *
 **************************/
func databaseWire() *gorm.DB {
	dbConfig := database.ReadFromDisk()
	db := gorm2.NewGormPostgres(dbConfig)
	return db
}

func webServerWire() *gin.Engine {
	engine := web.ProvideWebServer()
	return engine
}

func eventPublisherWire() events.Publisher {
	messenger := message_bus.NewMessenger()
	return messenger
}

func eventSubscriberWire() events.Subscriber {
	messenger := message_bus.NewMessenger()
	return messenger
}

func subscriberManagerWire() *application.SubscriptionManagement {
	subscribers := levelingSubscriberWire()
	subscriptionManagement := application.NewSubscriptionManagement(subscribers)
	return subscriptionManagement
}

/**************************
 *    security Providers  *
 **************************/
func userFinderWire() security.UserFinder {
	db := databaseWire()
	usersGormRepository := gorm2.NewUserGormRepository(db)
	return usersGormRepository
}

func userPersistenceWire() security.UserPersistence {
	db := databaseWire()
	usersGormRepository := gorm2.NewUserGormRepository(db)
	return usersGormRepository
}

func userServiceWire() security.UserService {
	userFinder := userFinderWire()
	userPersistence := userPersistenceWire()
	userManagement := security.NewUserManagement(userFinder, userPersistence)
	return userManagement
}

/*****************************
 *    Adventurers Providers  *
 *****************************/
func adventurerFinderWire() adventurers.AdventurerFinder {
	db := databaseWire()
	adventurersGormRepository := gorm2.NewAdventurersGormRepository(db)
	return adventurersGormRepository
}

func adventurerPersistenceWire() adventurers.AdventurerPersistence {
	db := databaseWire()
	adventurersGormRepository := gorm2.NewAdventurersGormRepository(db)
	return adventurersGormRepository
}

func adventurerServiceWire() adventurers.AdventurerService {
	adventurerFinder := adventurerFinderWire()
	adventurerPersistence := adventurerPersistenceWire()
	userService := userServiceWire()
	adventurerManager := adventurers.NewAdventurerManager(adventurerFinder, adventurerPersistence, userService)
	return adventurerManager
}

/*****************************
 *      Task Providers       *
 *****************************/
func taskFinderWire() tasks.TaskFinder {
	db := databaseWire()
	tasksGormRepository := gorm2.NewTasksGormRepository(db)
	return tasksGormRepository
}

func taskPersistenceWire() tasks.TaskPersistence {
	db := databaseWire()
	tasksGormRepository := gorm2.NewTasksGormRepository(db)
	return tasksGormRepository
}

func taskServiceWire() tasks.TaskService {
	taskFinder := taskFinderWire()
	taskPersistence := taskPersistenceWire()
	adventurerFinder := adventurerFinderWire()
	publisher := eventPublisherWire()
	taskManager := tasks.NewTaskManager(taskFinder, taskPersistence, adventurerFinder, publisher)
	return taskManager
}

func progressionFinderWire() leveling.ProgressionFinder {
	db := databaseWire()
	progressionGormRepository := gorm2.NewProgressionGormRepository(db)
	return progressionGormRepository
}

func progressionPersistenceWire() leveling.ProgressionPersistence {
	db := databaseWire()
	progressionGormRepository := gorm2.NewProgressionGormRepository(db)
	return progressionGormRepository
}

func progressionServiceWire() leveling.ProgressionService {
	progressionFinder := progressionFinderWire()
	progressionPersistence := progressionPersistenceWire()
	adventurerService := adventurerServiceWire()
	adventurerFinder := adventurerFinderWire()
	publisher := eventPublisherWire()
	progressionManagement := leveling.NewProgressionManagement(progressionFinder, progressionPersistence, adventurerService, adventurerFinder, publisher)
	return progressionManagement
}

func levelingSubscriberWire() *leveling.Subscribers {
	subscriber := eventSubscriberWire()
	progressionService := progressionServiceWire()
	subscribers := leveling.NewLevelingSubscribers(subscriber, progressionService)
	return subscribers
}

/**************************
 *    Api Providers  *
 **************************/
func authApiWireBuilder() *rest.AuthAPI {
	engine := web.ProvideWebServer()
	userService := userServiceWire()
	logger := commons.ProvideLogger()
	errorHandler := commons.ProvideErrorHandler(logger)
	authAPI := rest.NewAuthApi(engine, userService, errorHandler)
	return authAPI
}

// init_instances.go:

func Bootstrap() {

	loggerWire()

	databaseWire()
	webServerWire()
	eventPublisherWire()
	eventSubscriberWire()
	subscriberManagerWire()

	userPersistenceWire()
	userFinderWire()
	userServiceWire()

	adventurerFinderWire()
	adventurerPersistenceWire()
	adventurerServiceWire()

	taskFinderWire()
	taskPersistenceWire()
	taskServiceWire()

	progressionFinderWire()
	progressionPersistenceWire()
	progressionServiceWire()
	levelingSubscriberWire()

	authApiWireBuilder()
}
